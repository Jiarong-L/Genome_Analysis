
maker -c 4

https://github.com/hyphaltip/genome-scripts/blob/master/gene_prediction/zff2augustus_gbk.pl
for zff2aug.pl

-------------------------------------------1st round-------------------new1-----------------------------------------------
module load bioinfo-tools maker

cd /domus/h1/jili0178/GA2019/analyses_results/04_annotation/new1
maker -CTL

change maker_opts.ctl:

genome= /domus/h1/jili0178/GA2019/analyses_results/02_polishDNA/pilon_out_for0411_0427/pilon_out_0427.fa
est=/domus/h1/jili0178/GA2019/analyses_results/06_assemblyRNA/trinity_out/trinity_merged/Trinity-GG.fasta
est2genome=1

run maker(i use sbatch)

-------------------------------------------2nd round--------use snaphmm------------new2----------------------------------------------
module load bioinfo-tools maker

cd /domus/h1/jili0178/GA2019/analyses_results/04_annotation/new1/pilon_out_0427.maker.output

gff3_merge -d pilon_out_0427_master_datastore_index.log
maker2zff pilon_out_0427.all.gff
fathom genome.ann genome.dna -validate > snap_validate_output.txt
cat snap_validate_output.txt | grep "error" 
#MODEL315 7492 8096 3 + errors(1): cds:internal_stop warnings(2): split-start exon-1:short(1)
grep -vwE "MODEL315" genome.ann > genome.ann2
fathom genome.ann2 genome.dna -validate 
fathom genome.ann2 genome.dna -categorize 1000
fathom uni.ann uni.dna -export 1000 -plus 
grep '>' export.dna | wc -l
forge export.ann export.dna
hmm-assembler.pl pilon_out_0427 . > pilon_out_0427.hmm

cd /domus/h1/jili0178/GA2019/analyses_results/04_annotation/new2

maker -CTL

change maker_opts.ctl:

genome=/domus/h1/jili0178/GA2019/analyses_results/02_polishDNA/pilon_out_for0411_0427/pilon_out_0427.fa
snaphmm=/domus/h1/jili0178/GA2019/analyses_results/04_annotation/round1_maker.output/pilon_out_0427.hmm


run maker(i use sbatch)

！！！！！！！！！！！！-------------------------------------------3rd round--------use augustus-------------new_maker3---------------------------------------------

module load bioinfo-tools
module load maker
module load augustus

cd /domus/h1/jili0178/GA2019/analyses_results/04_annotation/new2/pilon_out_0427.maker.output

gff3_merge -d pilon_out_0427_master_datastore_index.log
maker2zff pilon_out_0427.all.gff
fathom genome.ann genome.dna -validate > snap_validate_output.txt
<<<<<<<<<cat snap_validate_output.txt | grep "error" 
<<<<<<<<<#MODEL315 7492 8096 3 + errors(1): cds:internal_stop warnings(2): split-start exon-1:short(1)
<<<<<<<<<<<grep -vwE "MODEL315" genome.ann > genome.ann2
<<<<<<<<<<<<<<<fathom genome.ann2 genome.dna -validate 
<<<<<<<<<<<<<<<fathom genome.ann2 genome.dna -categorize 1000
<<<<<<<<<<<<<<<<<fathom uni.ann uni.dna -export 1000 -plus 
<<<<<<<<<<<<<<<<<forge export.ann export.dna
<<<<<<<<<<<<<<<<<hmm-assembler.pl pilon_out_0427 . > pilon_out_0427.hmm


zff2gff3.pl genome.ann | perl -plne 's/\t(\S+)$/\t\.\t$1/' >genome.gff3

perl zff2aug.pl > augustus2.gbk
grep "LOCUS" augustus2.gbk| wc -l
#**
randomSplit.pl augustus2.gbk **



##----------change and create new.pl and copy 'configs' folder from AUGUSTUS..since need sudo but can't access
$configdir="/domus/h1/jili0178/GA2019/analyses_results/04_annotation/new2/pilon_out_0427.maker.output/config";

export AUGUSTUS_CONFIG_PATH=/domus/h1/jili0178/GA2019/analyses_results/04_annotation/new2/pilon_out_0427.maker.output/config
perl new.pl --species=my_durian

etraining --species=my_durian augustus.gbk.train
augustus --species=my_durian augustus.gbk.test | tee first_training.out


cd /domus/h1/jili0178/GA2019/analyses_results/04_annotation/new3

maker -CTL

change maker_opts.ctl:

genome=/domus/h1/jili0178/GA2019/analyses_results/02_polishDNA/pilon_out_for0411_0427/pilon_out_0427.fa
augustus_species=my_durian


--------------------------ANOTHER WAY-----------maker_AUGU using gff2gbSmallDNA-----------------------------------------------------------------------------------------------

module load bioinfo-tools
module load maker
module load augustus

cd /domus/h1/jili0178/GA2019/analyses_results/04_annotation/round1_maker.output

zff2gff3.pl genome.ann | perl -plne 's/\t(\S+)$/\t\.\t$1/' >genome.gff3

gff2gbSmallDNA.pl genome.gff3 /domus/h1/jili0178/GA2019/analyses_results/02_polishDNA/pilon_out_for0411_0427/pilon_out_0427.fa 4000 augustus.gbk


grep "LOCUS" augustus.gbk| wc -l
#1439

randomSplit.pl augustus.gbk 200

##----------change and create new.pl and copy 'configs' folder from AUGUSTUS..since need sudo but can't access
$configdir="/domus/h1/jili0178/GA2019/analyses_results/04_annotation/round1_maker.output/config";

export AUGUSTUS_CONFIG_PATH=/domus/h1/jili0178/GA2019/analyses_results/04_annotation/round1_maker.output/config

perl new.pl --species=my_species
etraining --species=my_species augustus.gbk.train
augustus --species=my_species augustus.gbk.test | tee first_training.out
